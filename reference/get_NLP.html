<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Creates the NLP features — get_NLP • CTVsuggestTrain</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creates the NLP features — get_NLP"><meta name="description" content="get_NLP() creates the NLP features for the model using Task View text and Package description text.
The function extracts the Task View text from the source markdown files on GitHub, then cleans them.
Then with the corpus of words generated from the Task Views text, it creates TF_IDF vectors for each of the words.
Then it computes the cosine similarity of the text in package titles and descriptions, to the TF-IDF vectors of each Task View.
Therefore, generating a set of features for each package, where the number of features is given by the number of Task Views."><meta property="og:description" content="get_NLP() creates the NLP features for the model using Task View text and Package description text.
The function extracts the Task View text from the source markdown files on GitHub, then cleans them.
Then with the corpus of words generated from the Task Views text, it creates TF_IDF vectors for each of the words.
Then it computes the cosine similarity of the text in package titles and descriptions, to the TF-IDF vectors of each Task View.
Therefore, generating a set of features for each package, where the number of features is given by the number of Task Views."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CTVsuggestTrain</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/DylanDijk/CTVsuggestTrain/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Creates the NLP features</h1>
      <small class="dont-index">Source: <a href="https://github.com/DylanDijk/CTVsuggestTrain/blob/main/R/get_NLP.R" class="external-link"><code>R/get_NLP.R</code></a></small>
      <div class="d-none name"><code>get_NLP.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>get_NLP()</code> creates the NLP features for the model using Task View text and Package description text.
The function extracts the Task View text from the source markdown files on GitHub, then cleans them.
Then with the corpus of words generated from the Task Views text, it creates TF_IDF vectors for each of the words.
Then it computes the cosine similarity of the text in package titles and descriptions, to the TF-IDF vectors of each Task View.
Therefore, generating a set of features for each package, where the number of features is given by the number of Task Views.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_NLP</span><span class="op">(</span></span>
<span>  TEST <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  limiting_n_observations <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  get_input_stored <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  get_input_path <span class="op">=</span> <span class="st">"tests/testthat/fixtures/get_data_output/get_data_output.rds"</span>,</span>
<span>  save_output <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  save_path <span class="op">=</span> <span class="st">"tests/testthat/fixtures/get_NLP_output"</span>,</span>
<span>  <span class="va">file_name</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-test">TEST<a class="anchor" aria-label="anchor" href="#arg-test"></a></dt>
<dd><p>logical. Default is <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">FALSE</a></code>. If <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">TRUE</a></code>, then a subset of the data that is extracted from CRAN is selected. This is to speed up testing.</p>
<p>More precisely, if <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">TRUE</a></code> a random selection of rows from <code>CRAN_data</code> is selected, where the number of rows
chosen is given by <code>limiting_n_observations</code>.</p></dd>


<dt id="arg-limiting-n-observations">limiting_n_observations<a class="anchor" aria-label="anchor" href="#arg-limiting-n-observations"></a></dt>
<dd><p>Integer that decides the size of the subset of <code>CRAN_data</code>, when <code>TEST</code> is <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">TRUE</a></code>.</p></dd>


<dt id="arg-get-input-stored">get_input_stored<a class="anchor" aria-label="anchor" href="#arg-get-input-stored"></a></dt>
<dd><p>logical. If <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">TRUE</a></code> then the function uses pre saved data as input, otherwise it runs the <code>CTVsuggestTrain </code>internal <code><a href="get_data.html">get_data()</a></code> function.</p></dd>


<dt id="arg-get-input-path">get_input_path<a class="anchor" aria-label="anchor" href="#arg-get-input-path"></a></dt>
<dd><p>string. If <code>get_input_stored</code> is set to <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">TRUE</a></code>, <code>get_input_path</code> gives the path location of the pre-saved data.</p></dd>


<dt id="arg-save-output">save_output<a class="anchor" aria-label="anchor" href="#arg-save-output"></a></dt>
<dd><p>logical. Default is <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">FALSE</a></code>. If <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">TRUE</a></code>, then the list that is returned is saved to the path set by
<code>save_path</code>.</p></dd>


<dt id="arg-save-path">save_path<a class="anchor" aria-label="anchor" href="#arg-save-path"></a></dt>
<dd><p>string. Sets the path where the list created by the function will be saved,
which is when <code>save_output</code> is set to <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">TRUE</a></code></p></dd>


<dt id="arg-file-name">file_name<a class="anchor" aria-label="anchor" href="#arg-file-name"></a></dt>
<dd><p>string. Sets the file name for the saved object.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns</p><ul><li><p><code>feature_matrix_titles_descriptions_packages_cosine</code> - list.
With element for each package being a vector of length of the number of task views.
Each element of the vector is generated by taking the cosine similarity of the TF_IDF vector of the corresponding Task View with the package text data TF_IDF
vector. The IDF term for the TF_IDF vector of the package text is generated by the Task View text corpus.</p></li>
<li><p><code>input_CRAN_data</code> - This just a list containing all of the data created by the CTVsuggest:::get_data function, so that it is carried forward.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>get_NLP()</code> function is run inside <code><a href="get_create_features.html">get_create_features()</a></code>.</p>
<p><code>get_NLP()</code> carries out the following steps:</p><ul><li><p>First the markdown files that generate the CRAN Task View description pages are imported. The text is then cleaned, for example, links are removed.</p></li>
<li><p>Using the text extracted for each Task View, a data frame is created which gives the count of each word for each Task View.</p></li>
<li><p>Using this object, we compute the TF-IDF weightings for each word. This is a data frame of the same dimension as the previous object mentioned.</p></li>
<li><p>Next we use code, provided by Dirk Eddilbettel, which extracts the titles and descriptions of each of the packages on CRAN.
This is given in a matrix object with a row for each package.</p></li>
<li><p>Then we create a list, consisting of data frames for each package, that give the counts for words in each of the package text.</p></li>
<li><p>For each package, we take the cosine similarity of the package text to the TF-IDF text of each Task View.</p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dylan Dijk.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

