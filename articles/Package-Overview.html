<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="CTVsuggestTrain">
<title>CTVsuggest Overview • CTVsuggestTrain</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="CTVsuggest Overview">
<meta property="og:description" content="CTVsuggestTrain">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">CTVsuggestTrain</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Package-Overview.html">CTVsuggest Overview</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>CTVsuggest Overview</h1>
            
      
      
      <div class="d-none name"><code>Package-Overview.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="ctvsuggest-package">CTVsuggest Package<a class="anchor" aria-label="anchor" href="#ctvsuggest-package"></a>
</h2>
<p>The aim of this package is to give suggestions for packages to be
added to Task Views.</p>
<p>There is a main function, <code><a href="https://rdrr.io/pkg/CTVsuggest/man/CTVsuggest.html" class="external-link">CTVsuggest::CTVsuggest()</a></code>, that
outputs these suggestions.</p>
<div class="section level3">
<h3 id="ctvsuggest-example">CTVsuggest Example<a class="anchor" aria-label="anchor" href="#ctvsuggest-example"></a>
</h3>
<!-- I have given the package and function the same name so that it is easy to remember, both are named **CTVsuggest**. -->
<p>First install the <strong>CTVsuggest</strong> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"DylanDijk/CTVsuggest"</span><span class="op">)</span></span></code></pre></div>
<p>Then attach the package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">CTVsuggest</span><span class="op">)</span></span></code></pre></div>
<p>To output the top 5 suggested packages for the
<strong>NaturalLanguageProcessing</strong> Task View</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/CTVsuggest/man/CTVsuggest.html" class="external-link">CTVsuggest</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span>, taskview <span class="op">=</span> <span class="st">"NaturalLanguageProcessing"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                NaturalLanguageProcessing       Packages</span></span>
<span><span class="co">#&gt; LSX                            0.9929149            LSX</span></span>
<span><span class="co">#&gt; doc2vec                        0.9819230        doc2vec</span></span>
<span><span class="co">#&gt; text.alignment                 0.9626282 text.alignment</span></span>
<span><span class="co">#&gt; jiebaRD                        0.9530279        jiebaRD</span></span>
<span><span class="co">#&gt; R.temis                        0.9166350        R.temis</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="the-package-workflow">The Package Workflow<a class="anchor" aria-label="anchor" href="#the-package-workflow"></a>
</h3>
<p>Alongside the <strong>CTVsuggest</strong> package there is the
<strong>CTVsuggestTrain</strong> package that contains code which
executes the training of the model.</p>
<p>The current workflow is that I run the
<code><a href="../reference/Train_model.html">CTVsuggestTrain::Train_model()</a></code> function, and then use the
trained model to get predicted classification probabilities for
packages. I find the classification probabilities for packages that are
not assigned a Task View and that does not meet a monthly download
threshold.</p>
<p>I then store predicted probabilities on the <a href="https://github.com/DylanDijk/CTVsuggestTrain" class="external-link">CTVsuggestTrain</a>
GitHub repo, the <strong>CTVsuggest</strong> package can then read this
to output suggestions for different Task Views.</p>
</div>
<div class="section level3">
<h3 id="the-model">The Model<a class="anchor" aria-label="anchor" href="#the-model"></a>
</h3>
<p>I now give a high level view of how the model is trained.</p>
<p>Look at the CTVsuggestTrain section or the CTVsuggestTrain package
documentation for a more detailed description.</p>
<div class="section level4">
<h4 id="multinomial-logistic-regression">Multinomial Logistic Regression<a class="anchor" aria-label="anchor" href="#multinomial-logistic-regression"></a>
</h4>
<p>The model aims to give a Task View suggestion after being giving some
set of features of an unassigned package. There are packages that are
assigned to multiple Task Views, but I have looked at classifying
packages to a single Task View. Therefore, I have set this up as a
multi-class classification problem, compared to a multi-label
problem.</p>
<p>However, it would not be reasonable to assign a Task View to every
package. This would depart from the objective of Task Views, which is to
give a sharp focus on packages that are needed for a task. For this
reason, the model also has the possibility of assigning a package to no
Task View. Therefore, the number of possible labels in this
classification problem is the number of Task Views + 1.</p>
<p>To perform this multi-class classification problem I have used
<strong>Multinomial Logistic Regression</strong> with a LASSO penalty,
trained using the <code>cv.glmnet</code> package.</p>
</div>
<div class="section level4">
<h4 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h4>
<p>I have used three different types of data to create the features for
this model:</p>
<ul>
<li>Text data from Package and Task View descriptions. <span class="math inline">\(n\)</span> Features</li>
<li>Package dependencies. <span class="math inline">\(n + 1\)</span>
features</li>
<li>Other Packages developed by the Authors. <span class="math inline">\(n + 1\)</span> features</li>
</ul>
<p>I have given the number of features constructed from each data type,
where <span class="math inline">\(n\)</span> denotes the number of Task
Views.</p>
<p>I will now go into more detail into how I constructed features from
this data.</p>
<div class="section level5">
<h5 id="text-data-from-package-and-task-view-descriptions">Text data from Package and Task View descriptions<a class="anchor" aria-label="anchor" href="#text-data-from-package-and-task-view-descriptions"></a>
</h5>
<ul>
<li>Each package on CRAN has a title and description describing the
purpose of the package
<ul>
<li>Example: <a href="https://cran.r-project.org/web/packages/fxregime/index.html" class="external-link">fxregime
package web page</a>
</li>
</ul>
</li>
<li>Each Task View has a page with text describing its scope
<ul>
<li>Example: <a href="https://cran.r-project.org/web/views/Econometrics.html" class="external-link">Econometrics
Task View description</a>
</li>
</ul>
</li>
</ul>
<p>I extract the Task View text data from their corresponding markdown
files (<a href="https://github.com/cran-task-views/Econometrics/blob/main/Econometrics.md" class="external-link">Econometrics
Task View Markdown file</a>) that exist within their GitHub
repositories. All of the GitHub repositories can be found in the <a href="https://github.com/cran-task-views" class="external-link">cran-task-views</a> GitHub
account.</p>
<p>I also extract the titles and descriptions for each of the packages.
I then measure the similarity between the package text to each Task View
text to create <span class="math inline">\(n\)</span> features.</p>
</div>
<div class="section level5">
<h5 id="package-dependencies">Package Dependencies<a class="anchor" aria-label="anchor" href="#package-dependencies"></a>
</h5>
<p>For each package, I look at the immediate hard dependencies to other
packages, and then calculate the proportion of the assignment of these
packages to Task Views.</p>
</div>
<div class="section level5">
<h5 id="other-packages-developed-by-the-authors">Other Packages developed by the Authors<a class="anchor" aria-label="anchor" href="#other-packages-developed-by-the-authors"></a>
</h5>
<p>For each package I look at all of the other packages created by the
authors of that package. I then calculate the proportion of these
packages that are assigned to each Task View.</p>
</div>
</div>
<div class="section level4">
<h4 id="training-data">Training Data<a class="anchor" aria-label="anchor" href="#training-data"></a>
</h4>
<p>To train and test the model I used packages that were assigned a Task
View, I also used a set of packages which I labelled as not belonging to
a Task View. The large proportion of packages not belonging to a Task
View would have not been reviewed by Task View maintainers, and so would
not be representative for packages belonging to the “None”
category.Therefore to choose the packages to include that are labelled
as belonging to the “None” category, we select packages that have a high
amount of monthly downloads</p>
<p>Then from this set of packages I split it with an 80:20 ratio, into a
training and testing set.</p>
</div>
<div class="section level4">
<h4 id="predictions">Predictions<a class="anchor" aria-label="anchor" href="#predictions"></a>
</h4>
<p>Using the trained model, I can get predictions by looking at the
predicted classification probabilities when given the set of features of
a package. I output the predicted classification probabilities for the
packages that are not assigned a Task View and do not meet the monthly
download threshold I mentioned in the previous section.</p>
</div>
<div class="section level4">
<h4 id="accuracy">Accuracy<a class="anchor" aria-label="anchor" href="#accuracy"></a>
</h4>
<p>The accuracy of the model can then be measured by comparing the
trained model predictions with the testing set.</p>
<p>In particular, I set the predicted Task View to be the one with the
largest predicted probability. The accuracy is then measured as the
proportion of correct predictions on the testing set. For packages that
are assigned to multiple Task View, I set a prediction as accurate if
its prediction is one of its assigned Task Views.</p>
</div>
</div>
<div class="section level3">
<h3 id="ctvsuggesttrain">CTVsuggestTrain<a class="anchor" aria-label="anchor" href="#ctvsuggesttrain"></a>
</h3>
<p>First install the <strong>CTVsuggestTrain</strong> package:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"DylanDijk/CTVsuggestTrain"</span><span class="op">)</span></span></code></pre></div>
<p>As mentioned above, the training of the models is performed with the
<code><a href="../reference/Train_model.html">CTVsuggestTrain::Train_model()</a></code> function. This function uses
four internal functions of the CTVsuggestTrain package which are run in
order:</p>
<ul>
<li><p><code><a href="../reference/get_data.html">get_data()</a></code></p></li>
<li><p><code><a href="../reference/get_NLP.html">get_NLP()</a></code>
<!-- Using all of the text from the Task View I have created a corpus. Then for each word I calculated the term frequency -->
<!-- For each package I have combined the title and description text, then I have vectorised this text as well as the Task View text. -->
<!-- Then for each package I have calculated the cosine similarity between its text vector against all of the Task Views text vectors.  --></p></li>
<li><p><code><a href="../reference/get_create_features.html">get_create_features()</a></code></p></li>
<li><p><code><a href="../reference/get_CRAN_logs.html">get_CRAN_logs()</a></code></p></li>
</ul>
<!-- Due to the huge number of packages --><!-- that are in CRAN it is infeasible for a Task View maintainer to review all of the available --><!-- packages.Therefore, a model that would give a small selection of high quality suggestions --><!-- for the maintainer to then review would be useful. Such a model would also be useful from the perspective of a package developer. After --><!-- publishing their package onto CRAN, they could then check whether they should propose --><!-- their package to one of the Task View maintainers. --><!-- The model we want to construct should give a Task View suggestion after being giving --><!-- some set of features of an unassigned package. However, it would not be reasonable to --><!-- assign a Task View to every package. This would depart from the objective of Task Views, --><!-- which is to give a sharp focus on packages that are needed for a task. For this reason, the --><!-- model should also have the possibility of assigning a package to no Task View. --><!-- Consequently, the model should have a multicategory response variable, made up of 37 categories. The 36 Task Views with an --><!-- additional “None” category. -->
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Dylan Dijk.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
